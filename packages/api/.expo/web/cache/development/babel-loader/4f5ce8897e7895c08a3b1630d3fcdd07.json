{"ast":null,"code":"\"use strict\";\n\nvar _regeneratorRuntime = require(\"@babel/runtime/regenerator\");\n\nvar _classCallCheck = require(\"@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"@babel/runtime/helpers/createClass\");\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function get() {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) {\n    if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  }\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nvar __metadata = this && this.__metadata || function (k, v) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\n\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Resource_1 = __importDefault(require(\"../schemas/Resource\"));\n\nvar typedi_1 = require(\"typedi\");\n\nvar DBService_1 = __importDefault(require(\"../services/DBService\"));\n\nvar type_graphql_1 = require(\"type-graphql\");\n\nvar ResourceService_1 = __importStar(require(\"../services/ResourceService\"));\n\nvar ResourceTypeService_1 = __importDefault(require(\"../services/ResourceTypeService\"));\n\nvar Pagination_1 = require(\"../schemas/Pagination\");\n\nvar ResourceResolver = function () {\n  function ResourceResolver(dbService, resourceService, resourceTypeService) {\n    _classCallCheck(this, ResourceResolver);\n\n    this.dbService = dbService;\n    this.resourceService = resourceService;\n    this.resourceTypeService = resourceTypeService;\n  }\n\n  _createClass(ResourceResolver, [{\n    key: \"db\",\n    get: function get() {\n      return this.dbService.db;\n    }\n  }, {\n    key: \"resource\",\n    value: function resource(id) {\n      var result;\n      return _regeneratorRuntime.async(function resource$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(this.resourceService.search({\n                ids: [id]\n              }));\n\n            case 2:\n              result = _context.sent;\n              return _context.abrupt(\"return\", result.items[0]);\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"resources\",\n    value: function resources(input, pagination) {\n      var result;\n      return _regeneratorRuntime.async(function resources$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return _regeneratorRuntime.awrap(this.resourceService.search(input, pagination));\n\n            case 2:\n              result = _context2.sent;\n              return _context2.abrupt(\"return\", result.items);\n\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"typeId\",\n    value: function typeId(resource) {\n      return _regeneratorRuntime.async(function typeId$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              return _context3.abrupt(\"return\", resource.type);\n\n            case 1:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }\n  }, {\n    key: \"type\",\n    value: function type(resource) {\n      var result;\n      return _regeneratorRuntime.async(function type$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.next = 2;\n              return _regeneratorRuntime.awrap(this.resourceTypeService.get(resource.type));\n\n            case 2:\n              result = _context4.sent;\n              return _context4.abrupt(\"return\", result);\n\n            case 4:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"assignedToId\",\n    value: function assignedToId(resource) {\n      return _regeneratorRuntime.async(function assignedToId$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              return _context5.abrupt(\"return\", resource.assignedTo);\n\n            case 1:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }\n  }, {\n    key: \"assignedTo\",\n    value: function assignedTo(resource) {\n      var result;\n      return _regeneratorRuntime.async(function assignedTo$(_context6) {\n        while (1) {\n          switch (_context6.prev = _context6.next) {\n            case 0:\n              if (resource.assignedTo) {\n                _context6.next = 2;\n                break;\n              }\n\n              return _context6.abrupt(\"return\", undefined);\n\n            case 2:\n              _context6.next = 4;\n              return _regeneratorRuntime.awrap(this.resourceService.search({\n                ids: [resource.assignedTo]\n              }));\n\n            case 4:\n              result = _context6.sent;\n              return _context6.abrupt(\"return\", result.items[0]);\n\n            case 6:\n            case \"end\":\n              return _context6.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"assignments\",\n    value: function assignments(resource) {\n      var result;\n      return _regeneratorRuntime.async(function assignments$(_context7) {\n        while (1) {\n          switch (_context7.prev = _context7.next) {\n            case 0:\n              _context7.next = 2;\n              return _regeneratorRuntime.awrap(this.resourceService.search({\n                assignedTo: [resource.id]\n              }));\n\n            case 2:\n              result = _context7.sent;\n              return _context7.abrupt(\"return\", result.items);\n\n            case 4:\n            case \"end\":\n              return _context7.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"fields\",\n    value: function fields(resource) {\n      var fields;\n      return _regeneratorRuntime.async(function fields$(_context8) {\n        while (1) {\n          switch (_context8.prev = _context8.next) {\n            case 0:\n              _context8.next = 2;\n              return _regeneratorRuntime.awrap(this.db('resource_fields').where('resource', resource.id));\n\n            case 2:\n              fields = _context8.sent;\n              return _context8.abrupt(\"return\", fields);\n\n            case 4:\n            case \"end\":\n              return _context8.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"totalPrice\",\n    value: function totalPrice(currency, resource) {\n      var children, childPrice;\n      return _regeneratorRuntime.async(function totalPrice$(_context9) {\n        while (1) {\n          switch (_context9.prev = _context9.next) {\n            case 0:\n              _context9.next = 2;\n              return _regeneratorRuntime.awrap(this.resourceService.getAllChildren(resource.id));\n\n            case 2:\n              children = _context9.sent;\n              childPrice = children.filter(function (c) {\n                return c.acquisitionPrice;\n              }).reduce(function (output, current) {\n                return output + current.acquisitionPrice;\n              }, 0);\n              return _context9.abrupt(\"return\", childPrice + (resource.acquisitionPrice || 0));\n\n            case 5:\n            case \"end\":\n              return _context9.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"documents\",\n    value: function documents(resource) {\n      var documents;\n      return _regeneratorRuntime.async(function documents$(_context10) {\n        while (1) {\n          switch (_context10.prev = _context10.next) {\n            case 0:\n              _context10.next = 2;\n              return _regeneratorRuntime.awrap(this.db('resource_documents').join('documents', 'documents.id', '=', 'resource_documents.document').where('resource_documents.resource', resource.id));\n\n            case 2:\n              documents = _context10.sent;\n              return _context10.abrupt(\"return\", documents);\n\n            case 4:\n            case \"end\":\n              return _context10.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"addResources\",\n    value: function addResources(resource, quantity, fields) {\n      var response;\n      return _regeneratorRuntime.async(function addResources$(_context11) {\n        while (1) {\n          switch (_context11.prev = _context11.next) {\n            case 0:\n              _context11.next = 2;\n              return _regeneratorRuntime.awrap(this.resourceService.add(resource, quantity, fields));\n\n            case 2:\n              response = _context11.sent;\n              return _context11.abrupt(\"return\", response);\n\n            case 4:\n            case \"end\":\n              return _context11.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"deleteResource\",\n    value: function deleteResource(resourceId) {\n      return _regeneratorRuntime.async(function deleteResource$(_context12) {\n        while (1) {\n          switch (_context12.prev = _context12.next) {\n            case 0:\n              _context12.next = 2;\n              return _regeneratorRuntime.awrap(this.resourceService.delete(resourceId));\n\n            case 2:\n              return _context12.abrupt(\"return\", true);\n\n            case 3:\n            case \"end\":\n              return _context12.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"assignResource\",\n    value: function assignResource(resourceId, assignTo) {\n      var result;\n      return _regeneratorRuntime.async(function assignResource$(_context13) {\n        while (1) {\n          switch (_context13.prev = _context13.next) {\n            case 0:\n              _context13.next = 2;\n              return _regeneratorRuntime.awrap(this.resourceService.assign(resourceId, assignTo));\n\n            case 2:\n              result = _context13.sent;\n              return _context13.abrupt(\"return\", result);\n\n            case 4:\n            case \"end\":\n              return _context13.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"addDocumentsToResource\",\n    value: function addDocumentsToResource(resourceId, documentIds) {\n      var result;\n      return _regeneratorRuntime.async(function addDocumentsToResource$(_context14) {\n        while (1) {\n          switch (_context14.prev = _context14.next) {\n            case 0:\n              _context14.next = 2;\n              return _regeneratorRuntime.awrap(this.resourceService.addDocuments(resourceId, documentIds));\n\n            case 2:\n              result = _context14.sent;\n              return _context14.abrupt(\"return\", result);\n\n            case 4:\n            case \"end\":\n              return _context14.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"removeDocumentFromResource\",\n    value: function removeDocumentFromResource(resourceId, documentId) {\n      var result;\n      return _regeneratorRuntime.async(function removeDocumentFromResource$(_context15) {\n        while (1) {\n          switch (_context15.prev = _context15.next) {\n            case 0:\n              _context15.next = 2;\n              return _regeneratorRuntime.awrap(this.resourceService.removeDocument(resourceId, documentId));\n\n            case 2:\n              result = _context15.sent;\n              return _context15.abrupt(\"return\", result);\n\n            case 4:\n            case \"end\":\n              return _context15.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"setResourceStatus\",\n    value: function setResourceStatus(resourceId, status) {\n      return _regeneratorRuntime.async(function setResourceStatus$(_context16) {\n        while (1) {\n          switch (_context16.prev = _context16.next) {\n            case 0:\n              _context16.next = 2;\n              return _regeneratorRuntime.awrap(this.db('resources').update({\n                status: status\n              }).where({\n                id: resourceId\n              }));\n\n            case 2:\n              return _context16.abrupt(\"return\", this.db('resources').where({\n                id: resourceId\n              }).first());\n\n            case 3:\n            case \"end\":\n              return _context16.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }]);\n\n  return ResourceResolver;\n}();\n\n__decorate([type_graphql_1.Query(function () {\n  return Resource_1.default;\n}), __param(0, type_graphql_1.Arg('id')), __metadata(\"design:type\", Function), __metadata(\"design:paramtypes\", [String]), __metadata(\"design:returntype\", Promise)], ResourceResolver.prototype, \"resource\", null);\n\n__decorate([type_graphql_1.Query(function () {\n  return [Resource_1.default];\n}), __param(0, type_graphql_1.Arg('input', {\n  defaultValue: {}\n})), __param(1, type_graphql_1.Arg('pagination', {\n  defaultValue: {}\n})), __metadata(\"design:type\", Function), __metadata(\"design:paramtypes\", [ResourceService_1.SearchInput, Pagination_1.PaginationInput]), __metadata(\"design:returntype\", Promise)], ResourceResolver.prototype, \"resources\", null);\n\n__decorate([type_graphql_1.FieldResolver(), __param(0, type_graphql_1.Root()), __metadata(\"design:type\", Function), __metadata(\"design:paramtypes\", [Resource_1.default]), __metadata(\"design:returntype\", Promise)], ResourceResolver.prototype, \"typeId\", null);\n\n__decorate([type_graphql_1.FieldResolver(), __param(0, type_graphql_1.Root()), __metadata(\"design:type\", Function), __metadata(\"design:paramtypes\", [Resource_1.default]), __metadata(\"design:returntype\", Promise)], ResourceResolver.prototype, \"type\", null);\n\n__decorate([type_graphql_1.FieldResolver(), __param(0, type_graphql_1.Root()), __metadata(\"design:type\", Function), __metadata(\"design:paramtypes\", [Resource_1.default]), __metadata(\"design:returntype\", Promise)], ResourceResolver.prototype, \"assignedToId\", null);\n\n__decorate([type_graphql_1.FieldResolver(), __param(0, type_graphql_1.Root()), __metadata(\"design:type\", Function), __metadata(\"design:paramtypes\", [Resource_1.default]), __metadata(\"design:returntype\", Promise)], ResourceResolver.prototype, \"assignedTo\", null);\n\n__decorate([type_graphql_1.FieldResolver(), __param(0, type_graphql_1.Root()), __metadata(\"design:type\", Function), __metadata(\"design:paramtypes\", [Resource_1.default]), __metadata(\"design:returntype\", Promise)], ResourceResolver.prototype, \"assignments\", null);\n\n__decorate([type_graphql_1.FieldResolver(), __param(0, type_graphql_1.Root()), __metadata(\"design:type\", Function), __metadata(\"design:paramtypes\", [Resource_1.default]), __metadata(\"design:returntype\", Promise)], ResourceResolver.prototype, \"fields\", null);\n\n__decorate([type_graphql_1.FieldResolver(), __param(0, type_graphql_1.Arg('currency')), __param(1, type_graphql_1.Root()), __metadata(\"design:type\", Function), __metadata(\"design:paramtypes\", [String, Resource_1.default]), __metadata(\"design:returntype\", Promise)], ResourceResolver.prototype, \"totalPrice\", null);\n\n__decorate([type_graphql_1.FieldResolver(), __param(0, type_graphql_1.Root()), __metadata(\"design:type\", Function), __metadata(\"design:paramtypes\", [Resource_1.default]), __metadata(\"design:returntype\", Promise)], ResourceResolver.prototype, \"documents\", null);\n\n__decorate([type_graphql_1.Mutation(function () {\n  return [Resource_1.default];\n}), __param(0, type_graphql_1.Arg('resource')), __param(1, type_graphql_1.Arg('quantity', {\n  nullable: true,\n  defaultValue: 1\n})), __param(2, type_graphql_1.Arg('fields', function () {\n  return [ResourceService_1.ResourceFieldInput];\n}, {\n  defaultValue: []\n})), __metadata(\"design:type\", Function), __metadata(\"design:paramtypes\", [ResourceService_1.ResourceInput, Number, Array]), __metadata(\"design:returntype\", Promise)], ResourceResolver.prototype, \"addResources\", null);\n\n__decorate([type_graphql_1.Mutation(function () {\n  return Boolean;\n}), __param(0, type_graphql_1.Arg('resourceId')), __metadata(\"design:type\", Function), __metadata(\"design:paramtypes\", [String]), __metadata(\"design:returntype\", Promise)], ResourceResolver.prototype, \"deleteResource\", null);\n\n__decorate([type_graphql_1.Mutation(function () {\n  return Resource_1.default;\n}), __param(0, type_graphql_1.Arg('resourceId')), __param(1, type_graphql_1.Arg('assignTo', {\n  nullable: true\n})), __metadata(\"design:type\", Function), __metadata(\"design:paramtypes\", [String, String]), __metadata(\"design:returntype\", Promise)], ResourceResolver.prototype, \"assignResource\", null);\n\n__decorate([type_graphql_1.Mutation(function () {\n  return Resource_1.default;\n}), __param(0, type_graphql_1.Arg('resourceId')), __param(1, type_graphql_1.Arg('documentIds', function () {\n  return [String];\n})), __metadata(\"design:type\", Function), __metadata(\"design:paramtypes\", [String, Array]), __metadata(\"design:returntype\", Promise)], ResourceResolver.prototype, \"addDocumentsToResource\", null);\n\n__decorate([type_graphql_1.Mutation(function () {\n  return Resource_1.default;\n}), __param(0, type_graphql_1.Arg('resourceId')), __param(1, type_graphql_1.Arg('documentId')), __metadata(\"design:type\", Function), __metadata(\"design:paramtypes\", [String, String]), __metadata(\"design:returntype\", Promise)], ResourceResolver.prototype, \"removeDocumentFromResource\", null);\n\n__decorate([type_graphql_1.Mutation(function () {\n  return Resource_1.default;\n}), __param(0, type_graphql_1.Arg('resourceId')), __param(1, type_graphql_1.Arg('status', {\n  nullable: true\n})), __metadata(\"design:type\", Function), __metadata(\"design:paramtypes\", [String, String]), __metadata(\"design:returntype\", Promise)], ResourceResolver.prototype, \"setResourceStatus\", null);\n\nResourceResolver = __decorate([typedi_1.Service(), type_graphql_1.Resolver(function () {\n  return Resource_1.default;\n}), __metadata(\"design:paramtypes\", [DBService_1.default, ResourceService_1.default, ResourceTypeService_1.default])], ResourceResolver);\nexports.default = ResourceResolver;","map":{"version":3,"sources":["../../../src/resolvers/Resource.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst Resource_1 = __importDefault(require(\"../schemas/Resource\"));\nconst typedi_1 = require(\"typedi\");\nconst DBService_1 = __importDefault(require(\"../services/DBService\"));\nconst type_graphql_1 = require(\"type-graphql\");\nconst ResourceService_1 = __importStar(require(\"../services/ResourceService\"));\nconst ResourceTypeService_1 = __importDefault(require(\"../services/ResourceTypeService\"));\nconst Pagination_1 = require(\"../schemas/Pagination\");\nlet ResourceResolver = class ResourceResolver {\n    constructor(dbService, resourceService, resourceTypeService) {\n        this.dbService = dbService;\n        this.resourceService = resourceService;\n        this.resourceTypeService = resourceTypeService;\n    }\n    get db() {\n        return this.dbService.db;\n    }\n    async resource(id) {\n        const result = await this.resourceService.search({\n            ids: [id],\n        });\n        return result.items[0];\n    }\n    async resources(input, pagination) {\n        const result = await this.resourceService.search(input, pagination);\n        return result.items;\n    }\n    async typeId(resource) {\n        return resource.type;\n    }\n    async type(resource) {\n        const result = await this.resourceTypeService.get(resource.type);\n        return result;\n    }\n    async assignedToId(resource) {\n        return resource.assignedTo;\n    }\n    async assignedTo(resource) {\n        if (!resource.assignedTo) {\n            return undefined;\n        }\n        const result = await this.resourceService.search({\n            ids: [resource.assignedTo],\n        });\n        return result.items[0];\n    }\n    async assignments(resource) {\n        const result = await this.resourceService.search({\n            assignedTo: [resource.id],\n        });\n        return result.items;\n    }\n    async fields(resource) {\n        const fields = await this.db('resource_fields')\n            .where('resource', resource.id);\n        return fields;\n    }\n    async totalPrice(currency, resource) {\n        const children = await this.resourceService.getAllChildren(resource.id);\n        const childPrice = children.filter(c => c.acquisitionPrice).reduce((output, current) => output + current.acquisitionPrice, 0);\n        return childPrice + (resource.acquisitionPrice || 0);\n    }\n    async documents(resource) {\n        const documents = await this.db('resource_documents')\n            .join('documents', 'documents.id', '=', 'resource_documents.document')\n            .where('resource_documents.resource', resource.id);\n        return documents;\n    }\n    async addResources(resource, quantity, fields) {\n        const response = await this.resourceService.add(resource, quantity, fields);\n        return response;\n    }\n    async deleteResource(resourceId) {\n        await this.resourceService.delete(resourceId);\n        return true;\n    }\n    async assignResource(resourceId, assignTo) {\n        const result = await this.resourceService.assign(resourceId, assignTo);\n        return result;\n    }\n    async addDocumentsToResource(resourceId, documentIds) {\n        const result = await this.resourceService.addDocuments(resourceId, documentIds);\n        return result;\n    }\n    async removeDocumentFromResource(resourceId, documentId) {\n        const result = await this.resourceService.removeDocument(resourceId, documentId);\n        return result;\n    }\n    async setResourceStatus(resourceId, status) {\n        await this.db('resources').update({\n            status,\n        }).where({ id: resourceId });\n        return this.db('resources').where({ id: resourceId }).first();\n    }\n};\n__decorate([\n    type_graphql_1.Query(() => Resource_1.default),\n    __param(0, type_graphql_1.Arg('id')),\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", [String]),\n    __metadata(\"design:returntype\", Promise)\n], ResourceResolver.prototype, \"resource\", null);\n__decorate([\n    type_graphql_1.Query(() => [Resource_1.default]),\n    __param(0, type_graphql_1.Arg('input', { defaultValue: {} })),\n    __param(1, type_graphql_1.Arg('pagination', { defaultValue: {} })),\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", [ResourceService_1.SearchInput,\n        Pagination_1.PaginationInput]),\n    __metadata(\"design:returntype\", Promise)\n], ResourceResolver.prototype, \"resources\", null);\n__decorate([\n    type_graphql_1.FieldResolver(),\n    __param(0, type_graphql_1.Root()),\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", [Resource_1.default]),\n    __metadata(\"design:returntype\", Promise)\n], ResourceResolver.prototype, \"typeId\", null);\n__decorate([\n    type_graphql_1.FieldResolver(),\n    __param(0, type_graphql_1.Root()),\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", [Resource_1.default]),\n    __metadata(\"design:returntype\", Promise)\n], ResourceResolver.prototype, \"type\", null);\n__decorate([\n    type_graphql_1.FieldResolver(),\n    __param(0, type_graphql_1.Root()),\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", [Resource_1.default]),\n    __metadata(\"design:returntype\", Promise)\n], ResourceResolver.prototype, \"assignedToId\", null);\n__decorate([\n    type_graphql_1.FieldResolver(),\n    __param(0, type_graphql_1.Root()),\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", [Resource_1.default]),\n    __metadata(\"design:returntype\", Promise)\n], ResourceResolver.prototype, \"assignedTo\", null);\n__decorate([\n    type_graphql_1.FieldResolver(),\n    __param(0, type_graphql_1.Root()),\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", [Resource_1.default]),\n    __metadata(\"design:returntype\", Promise)\n], ResourceResolver.prototype, \"assignments\", null);\n__decorate([\n    type_graphql_1.FieldResolver(),\n    __param(0, type_graphql_1.Root()),\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", [Resource_1.default]),\n    __metadata(\"design:returntype\", Promise)\n], ResourceResolver.prototype, \"fields\", null);\n__decorate([\n    type_graphql_1.FieldResolver(),\n    __param(0, type_graphql_1.Arg('currency')),\n    __param(1, type_graphql_1.Root()),\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", [String, Resource_1.default]),\n    __metadata(\"design:returntype\", Promise)\n], ResourceResolver.prototype, \"totalPrice\", null);\n__decorate([\n    type_graphql_1.FieldResolver(),\n    __param(0, type_graphql_1.Root()),\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", [Resource_1.default]),\n    __metadata(\"design:returntype\", Promise)\n], ResourceResolver.prototype, \"documents\", null);\n__decorate([\n    type_graphql_1.Mutation(() => [Resource_1.default]),\n    __param(0, type_graphql_1.Arg('resource')),\n    __param(1, type_graphql_1.Arg('quantity', { nullable: true, defaultValue: 1 })),\n    __param(2, type_graphql_1.Arg('fields', () => [ResourceService_1.ResourceFieldInput], { defaultValue: [] })),\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", [ResourceService_1.ResourceInput, Number, Array]),\n    __metadata(\"design:returntype\", Promise)\n], ResourceResolver.prototype, \"addResources\", null);\n__decorate([\n    type_graphql_1.Mutation(() => Boolean),\n    __param(0, type_graphql_1.Arg('resourceId')),\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", [String]),\n    __metadata(\"design:returntype\", Promise)\n], ResourceResolver.prototype, \"deleteResource\", null);\n__decorate([\n    type_graphql_1.Mutation(() => Resource_1.default),\n    __param(0, type_graphql_1.Arg('resourceId')),\n    __param(1, type_graphql_1.Arg('assignTo', { nullable: true })),\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", [String, String]),\n    __metadata(\"design:returntype\", Promise)\n], ResourceResolver.prototype, \"assignResource\", null);\n__decorate([\n    type_graphql_1.Mutation(() => Resource_1.default),\n    __param(0, type_graphql_1.Arg('resourceId')),\n    __param(1, type_graphql_1.Arg('documentIds', () => [String])),\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", [String, Array]),\n    __metadata(\"design:returntype\", Promise)\n], ResourceResolver.prototype, \"addDocumentsToResource\", null);\n__decorate([\n    type_graphql_1.Mutation(() => Resource_1.default),\n    __param(0, type_graphql_1.Arg('resourceId')),\n    __param(1, type_graphql_1.Arg('documentId')),\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", [String, String]),\n    __metadata(\"design:returntype\", Promise)\n], ResourceResolver.prototype, \"removeDocumentFromResource\", null);\n__decorate([\n    type_graphql_1.Mutation(() => Resource_1.default),\n    __param(0, type_graphql_1.Arg('resourceId')),\n    __param(1, type_graphql_1.Arg('status', { nullable: true })),\n    __metadata(\"design:type\", Function),\n    __metadata(\"design:paramtypes\", [String, String]),\n    __metadata(\"design:returntype\", Promise)\n], ResourceResolver.prototype, \"setResourceStatus\", null);\nResourceResolver = __decorate([\n    typedi_1.Service(),\n    type_graphql_1.Resolver(() => Resource_1.default),\n    __metadata(\"design:paramtypes\", [DBService_1.default,\n        ResourceService_1.default,\n        ResourceTypeService_1.default])\n], ResourceResolver);\nexports.default = ResourceResolver;\n//# sourceMappingURL=Resource.js.map"]},"metadata":{},"sourceType":"script"}