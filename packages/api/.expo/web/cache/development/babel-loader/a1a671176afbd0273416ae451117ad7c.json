{"ast":null,"code":"\"use strict\";\n\nvar _regeneratorRuntime = require(\"@babel/runtime/regenerator\");\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar knex_1 = __importDefault(require(\"knex\"));\n\nvar migrations_1 = __importDefault(require(\"./migrations\"));\n\nvar migrationSource = {\n  getMigration: function getMigration(migration) {\n    return migration;\n  },\n  getMigrations: function getMigrations() {\n    return _regeneratorRuntime.async(function getMigrations$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            return _context.abrupt(\"return\", migrations_1.default);\n\n          case 1:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  },\n  getMigrationName: function getMigrationName(migration) {\n    return migration.name;\n  }\n};\n\nvar setup = function setup(config) {\n  var db;\n  return _regeneratorRuntime.async(function setup$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          db = knex_1.default(config);\n          _context2.next = 3;\n          return _regeneratorRuntime.awrap(db.migrate.latest({\n            migrationSource: migrationSource\n          }));\n\n        case 3:\n          return _context2.abrupt(\"return\", db);\n\n        case 4:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, null, null, null, Promise);\n};\n\nexports.default = setup;","map":{"version":3,"sources":["../../../src/data/setup.ts"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA,IAAA,MAAA,GAAA,eAAA,CAAA,OAAA,CAAA,MAAA,CAAA,CAAA;;AACA,IAAA,YAAA,GAAA,eAAA,CAAA,OAAA,gBAAA,CAAA;;AAEA,IAAM,eAAe,GAAmC;AACtD,EAAA,YAAY,EAAE,sBAAA,SAAS;AAAA,WAAI,SAAJ;AAAA,GAD+B;AAEtD,EAAA,aAAa,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA,6CAAY,YAAA,CAAA,OAAZ;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAFuC;AAGtD,EAAA,gBAAgB,EAAE,0BAAA,SAAS;AAAA,WAAI,SAAS,CAAC,IAAd;AAAA;AAH2B,CAAxD;;AAME,IAAM,KAAK,GAAG,SAAR,KAAQ,CAAO,MAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AACR,UAAA,EADQ,GACH,MAAA,CAAA,OAAA,CAAK,MAAL,CADG;AAAA;AAAA,2CAGR,EAAE,CAAC,OAAH,CAAW,MAAX,CAAkB;AACtB,YAAA,eAAe,EAAf;AADsB,WAAlB,CAHQ;;AAAA;AAAA,4CAOP,EAPO;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAd;;AAUF,OAAA,CAAA,OAAA,GAAe,KAAf","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst knex_1 = __importDefault(require(\"knex\"));\nconst migrations_1 = __importDefault(require(\"./migrations\"));\nconst migrationSource = {\n    getMigration: migration => migration,\n    getMigrations: async () => migrations_1.default,\n    getMigrationName: migration => migration.name,\n};\nconst setup = async (config) => {\n    const db = knex_1.default(config);\n    await db.migrate.latest({\n        migrationSource,\n    });\n    return db;\n};\nexports.default = setup;\n//# sourceMappingURL=setup.js.map"]},"metadata":{},"sourceType":"script"}