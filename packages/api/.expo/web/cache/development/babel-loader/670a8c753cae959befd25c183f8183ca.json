{"ast":null,"code":"\"use strict\";\n\nvar _regeneratorRuntime = require(\"@babel/runtime/regenerator\");\n\nvar _createClass = require(\"@babel/runtime/helpers/createClass\");\n\nvar _classCallCheck = require(\"@babel/runtime/helpers/classCallCheck\");\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __metadata = this && this.__metadata || function (k, v) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ResourceTypeInput = void 0;\n\nvar typedi_1 = require(\"typedi\");\n\nvar nanoid_1 = require(\"nanoid\");\n\nvar type_graphql_1 = require(\"type-graphql\");\n\nvar DBService_1 = __importDefault(require(\"./DBService\"));\n\nvar Pagination_1 = require(\"../schemas/Pagination\");\n\nvar ResourceTypeInput = function ResourceTypeInput() {\n  _classCallCheck(this, ResourceTypeInput);\n\n  this.name = '';\n};\n\n__decorate([type_graphql_1.Field({\n  nullable: true\n}), __metadata(\"design:type\", String)], ResourceTypeInput.prototype, \"id\", void 0);\n\n__decorate([type_graphql_1.Field(), __metadata(\"design:type\", String)], ResourceTypeInput.prototype, \"name\", void 0);\n\n__decorate([type_graphql_1.Field({\n  nullable: true\n}), __metadata(\"design:type\", String)], ResourceTypeInput.prototype, \"description\", void 0);\n\n__decorate([type_graphql_1.Field({\n  nullable: true\n}), __metadata(\"design:type\", String)], ResourceTypeInput.prototype, \"icon\", void 0);\n\nResourceTypeInput = __decorate([type_graphql_1.InputType()], ResourceTypeInput);\nexports.ResourceTypeInput = ResourceTypeInput;\n\nvar ResourceTypeService = function () {\n  function ResourceTypeService(dbService) {\n    var _this = this;\n\n    _classCallCheck(this, ResourceTypeService);\n\n    this.dbService = dbService;\n\n    this.add = function _callee(input) {\n      var id;\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              id = input.id || nanoid_1.nanoid();\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(_this.db('resource_types').insert({\n                id: id,\n                name: input.name,\n                icon: input.icon,\n                description: input.description\n              }));\n\n            case 3:\n              return _context.abrupt(\"return\", _this.db('resource_types').where({\n                id: id\n              }).first());\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    this.list = function _callee2() {\n      var pagination,\n          query,\n          result,\n          _args2 = arguments;\n      return _regeneratorRuntime.async(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              pagination = _args2.length > 0 && _args2[0] !== undefined ? _args2[0] : {};\n              query = _this.db('resource_types');\n              _context2.next = 4;\n              return _regeneratorRuntime.awrap(Pagination_1.addPagination(query, pagination));\n\n            case 4:\n              result = _context2.sent;\n              return _context2.abrupt(\"return\", result);\n\n            case 6:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    this.get = function _callee3(id) {\n      var query, result;\n      return _regeneratorRuntime.async(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              query = _this.db('resource_types').where({\n                id: id\n              }).first();\n              _context3.next = 3;\n              return _regeneratorRuntime.awrap(query);\n\n            case 3:\n              result = _context3.sent;\n              return _context3.abrupt(\"return\", result);\n\n            case 5:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n  }\n\n  _createClass(ResourceTypeService, [{\n    key: \"db\",\n    get: function get() {\n      return this.dbService.db;\n    }\n  }]);\n\n  return ResourceTypeService;\n}();\n\nResourceTypeService = __decorate([typedi_1.Service(), __metadata(\"design:paramtypes\", [DBService_1.default])], ResourceTypeService);\nexports.default = ResourceTypeService;","map":{"version":3,"sources":["../../../src/services/ResourceTypeService.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ResourceTypeInput = void 0;\nconst typedi_1 = require(\"typedi\");\nconst nanoid_1 = require(\"nanoid\");\nconst type_graphql_1 = require(\"type-graphql\");\nconst DBService_1 = __importDefault(require(\"./DBService\"));\nconst Pagination_1 = require(\"../schemas/Pagination\");\nlet ResourceTypeInput = class ResourceTypeInput {\n    constructor() {\n        this.name = '';\n    }\n};\n__decorate([\n    type_graphql_1.Field({ nullable: true }),\n    __metadata(\"design:type\", String)\n], ResourceTypeInput.prototype, \"id\", void 0);\n__decorate([\n    type_graphql_1.Field(),\n    __metadata(\"design:type\", String)\n], ResourceTypeInput.prototype, \"name\", void 0);\n__decorate([\n    type_graphql_1.Field({ nullable: true }),\n    __metadata(\"design:type\", String)\n], ResourceTypeInput.prototype, \"description\", void 0);\n__decorate([\n    type_graphql_1.Field({ nullable: true }),\n    __metadata(\"design:type\", String)\n], ResourceTypeInput.prototype, \"icon\", void 0);\nResourceTypeInput = __decorate([\n    type_graphql_1.InputType()\n], ResourceTypeInput);\nexports.ResourceTypeInput = ResourceTypeInput;\nlet ResourceTypeService = class ResourceTypeService {\n    constructor(dbService) {\n        this.dbService = dbService;\n        this.add = async (input) => {\n            const id = input.id || nanoid_1.nanoid();\n            await this.db('resource_types').insert({\n                id,\n                name: input.name,\n                icon: input.icon,\n                description: input.description,\n            });\n            return this.db('resource_types').where({ id }).first();\n        };\n        this.list = async (pagination = {}) => {\n            const query = this.db('resource_types');\n            const result = await Pagination_1.addPagination(query, pagination);\n            return result;\n        };\n        this.get = async (id) => {\n            const query = this.db('resource_types').where({ id }).first();\n            const result = await query;\n            return result;\n        };\n    }\n    get db() {\n        return this.dbService.db;\n    }\n};\nResourceTypeService = __decorate([\n    typedi_1.Service(),\n    __metadata(\"design:paramtypes\", [DBService_1.default])\n], ResourceTypeService);\nexports.default = ResourceTypeService;\n//# sourceMappingURL=ResourceTypeService.js.map"]},"metadata":{},"sourceType":"script"}