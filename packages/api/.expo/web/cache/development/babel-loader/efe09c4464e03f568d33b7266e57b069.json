{"ast":null,"code":"\"use strict\";\n\nvar _regeneratorRuntime = require(\"@babel/runtime/regenerator\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.down = exports.up = exports.name = void 0;\nvar name = 'init';\nexports.name = name;\n\nvar up = function up(knex) {\n  return _regeneratorRuntime.async(function up$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return _regeneratorRuntime.awrap(knex.schema.createTable('resource_types', function (table) {\n            table.string('id').primary();\n            table.string('name').notNullable();\n            table.string('description').nullable();\n            table.string('icon').nullable();\n          }));\n\n        case 2:\n          _context.next = 4;\n          return _regeneratorRuntime.awrap(knex.schema.createTable('resources', function (table) {\n            table.string('id').notNullable().primary();\n            table.string('name').notNullable().index();\n            table.string('type').references('id').inTable('resource_types').notNullable().index();\n            table.string('ref').nullable().index();\n            table.string('assignedTo').nullable().references('id').inTable('resources').index();\n            table.enum('status', ['normal', 'defect', 'lost', 'destroyed']).nullable().index();\n            table.text('description').nullable();\n            table.bigInteger('acquisitionTime').nullable();\n            table.float('acquisitionPrice').nullable();\n            table.string('acquisitionCurrency').nullable();\n          }));\n\n        case 4:\n          _context.next = 6;\n          return _regeneratorRuntime.awrap(knex.schema.createTable('resource_fields', function (table) {\n            table.string('name').notNullable();\n            table.string('resource').references('id').inTable('resources').notNullable().index();\n            table.string('type').notNullable();\n            table.text('value').nullable();\n            table.primary(['name', 'resource']);\n          }));\n\n        case 6:\n          _context.next = 8;\n          return _regeneratorRuntime.awrap(knex.schema.createTable('documents', function (table) {\n            table.string('id').primary();\n            table.string('name').nullable();\n            table.string('mimeType').notNullable();\n            table.integer('size').notNullable();\n          }));\n\n        case 8:\n          _context.next = 10;\n          return _regeneratorRuntime.awrap(knex.schema.createTable('resource_documents', function (table) {\n            table.string('resource').references('id').inTable('resources').notNullable().index();\n            table.string('document').references('id').inTable('documents').notNullable().index();\n            table.primary(['resource', 'document']);\n          }));\n\n        case 10:\n          _context.next = 12;\n          return _regeneratorRuntime.awrap(knex.schema.createTable('assign_log', function (table) {\n            table.increments('id').primary();\n            table.string('resource').notNullable().references('id').inTable('resources').index();\n            table.string('assigned').nullable().index();\n            table.dateTime('dateAssigned').nullable();\n            table.dateTime('dateUnassigned').nullable();\n            table.text('note');\n          }));\n\n        case 12:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, null, Promise);\n};\n\nexports.up = up;\n\nvar down = function down(knex) {\n  return _regeneratorRuntime.async(function down$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.next = 2;\n          return _regeneratorRuntime.awrap(knex.schema.dropTable('resource_types'));\n\n        case 2:\n          _context2.next = 4;\n          return _regeneratorRuntime.awrap(knex.schema.dropTable('resources'));\n\n        case 4:\n          _context2.next = 6;\n          return _regeneratorRuntime.awrap(knex.schema.dropTable('resource_fields'));\n\n        case 6:\n          _context2.next = 8;\n          return _regeneratorRuntime.awrap(knex.schema.dropTable('documents'));\n\n        case 8:\n          _context2.next = 10;\n          return _regeneratorRuntime.awrap(knex.schema.dropTable('resource_documents'));\n\n        case 10:\n          _context2.next = 12;\n          return _regeneratorRuntime.awrap(knex.schema.dropTable('assignLog'));\n\n        case 12:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, null, null, null, Promise);\n};\n\nexports.down = down;","map":{"version":3,"sources":["../../../../src/data/migrations/init.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.down = exports.up = exports.name = void 0;\nconst name = 'init';\nexports.name = name;\nconst up = async (knex) => {\n    await knex.schema.createTable('resource_types', (table) => {\n        table.string('id').primary();\n        table.string('name').notNullable();\n        table.string('description').nullable();\n        table.string('icon').nullable();\n    });\n    await knex.schema.createTable('resources', (table) => {\n        table.string('id').notNullable().primary();\n        table.string('name').notNullable().index();\n        table.string('type').references('id').inTable('resource_types').notNullable().index();\n        table.string('ref').nullable().index();\n        table.string('assignedTo').nullable().references('id').inTable('resources').index();\n        table.enum('status', ['normal', 'defect', 'lost', 'destroyed']).nullable().index();\n        table.text('description').nullable();\n        table.bigInteger('acquisitionTime').nullable();\n        table.float('acquisitionPrice').nullable();\n        table.string('acquisitionCurrency').nullable();\n    });\n    await knex.schema.createTable('resource_fields', (table) => {\n        table.string('name').notNullable();\n        table.string('resource').references('id').inTable('resources').notNullable().index();\n        table.string('type').notNullable();\n        table.text('value').nullable();\n        table.primary(['name', 'resource']);\n    });\n    await knex.schema.createTable('documents', (table) => {\n        table.string('id').primary();\n        table.string('name').nullable();\n        table.string('mimeType').notNullable();\n        table.integer('size').notNullable();\n    });\n    await knex.schema.createTable('resource_documents', (table) => {\n        table.string('resource').references('id').inTable('resources').notNullable().index();\n        table.string('document').references('id').inTable('documents').notNullable().index();\n        table.primary(['resource', 'document']);\n    });\n    await knex.schema.createTable('assign_log', (table) => {\n        table.increments('id').primary();\n        table.string('resource').notNullable().references('id').inTable('resources').index();\n        table.string('assigned').nullable().index();\n        table.dateTime('dateAssigned').nullable();\n        table.dateTime('dateUnassigned').nullable();\n        table.text('note');\n    });\n};\nexports.up = up;\nconst down = async (knex) => {\n    await knex.schema.dropTable('resource_types');\n    await knex.schema.dropTable('resources');\n    await knex.schema.dropTable('resource_fields');\n    await knex.schema.dropTable('documents');\n    await knex.schema.dropTable('resource_documents');\n    await knex.schema.dropTable('assignLog');\n};\nexports.down = down;\n//# sourceMappingURL=init.js.map"]},"metadata":{},"sourceType":"script"}